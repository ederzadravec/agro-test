FROM node:20
WORKDIR /api
COPY . .
RUN yarn 
RUN yarn build

ENV TZ=$TZ
ENV APP_KEY=$APP_KEY
ENV HOST=$HOST
ENV PORT=$_PORT
ENV LOG_LEVEL=$LOG_LEVEL
ENV NODE_ENV=$NODE_ENV

ENV DB_HOST=$DB_HOST
ENV DB_PORT=$DB_PORT
ENV DB_USER=$DB_USER
ENV DB_PASSWORD=$DB_PASSWORD
ENV DB_DATABASE=$DB_DATABASE

EXPOSE 8080
CMD ["yarn", "start"]
